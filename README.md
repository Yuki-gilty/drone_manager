# ドローンレース機体管理Webアプリ（POC）

ドローンレースで使用する複数の機体（5〜10機）を効率的に管理するためのWebアプリケーションです。

## 機能

- **機体管理**: 機体の登録、一覧表示、詳細表示
- **機体の種類管理**: カスタム可能な機体の種類（5inch、Whoop、FPV Wingなど）
- **パーツ管理**: 各機体に使用しているパーツの登録と管理
- **交換履歴**: パーツの交換履歴の記録と確認
- **修理履歴**: 機体やパーツの修理履歴の記録と確認
- **カレンダー機能**: パーツ交換日、修理日、練習日をカレンダー上で確認

## 技術スタック

- **フロントエンド**: HTML/CSS/バニラJavaScript（ES6+ モジュール）
- **バックエンド**: Python Flask（RESTful API）
- **データベース**: SQLite
- **認証**: Flask-Session（セッション管理）
- **写真保存**: Base64エンコードしてデータベースに保存

## セットアップ

### 前提条件

- Python 3.11以上
- [UV](https://github.com/astral-sh/uv) パッケージマネージャー

### インストール手順

1. プロジェクトディレクトリに移動:
```bash
cd drone_manager
```

2. UVで依存関係をインストール:
```bash
uv sync
```

3. サーバーを起動:
```bash
uv run python server.py
```

4. ブラウザでアクセス:
```
http://localhost:8000
```

5. 初回アクセス時は新規ユーザー登録が必要です
   - 「新規登録」ボタンをクリック
   - ユーザー名、パスワード（8文字以上）、メールアドレス（任意）を入力
   - 登録後、自動的にログインされます

## 使用方法

### 機体の追加

1. ホーム画面で「機体を追加」ボタンをクリック
2. 機体名、種類、使用開始日、写真を入力
3. 「追加」ボタンをクリック

### 機体の種類の管理

1. ホーム画面で「種類を管理」ボタンをクリック
2. 新しい種類を追加、または既存の種類を削除

### パーツの追加

1. 機体詳細画面で「パーツを追加」ボタンをクリック
2. パーツ名と使用開始日を入力
3. 「追加」ボタンをクリック

### 交換履歴の追加

1. パーツ詳細画面で「交換履歴を追加」ボタンをクリック
2. 交換日と内容を入力
3. 「追加」ボタンをクリック

### 修理履歴の追加

1. 機体詳細画面で「修理履歴を追加」ボタンをクリック
2. 修理日と内容を入力
3. 「追加」ボタンをクリック

### カレンダーの確認

1. ナビゲーションバーで「カレンダー」をクリック
2. 月次カレンダーでイベントを確認
3. 「練習日を追加」ボタンで練習日を登録

## データ移行

既存のlocalStorageデータをSQLiteデータベースに移行する場合は、[MIGRATION.md](./MIGRATION.md)を参照してください。

## 注意事項

- データはSQLiteデータベース（`drone_manager.db`）に保存されます
- ユーザーごとにデータが分離されます（マルチユーザー対応）
- 写真はBase64形式でデータベースに保存されるため、大量の写真を保存するとデータベースサイズが大きくなる可能性があります
- セッションは30日間有効です
- 本番環境で使用する場合は、`SECRET_KEY`環境変数を設定してください

## セキュリティ

- パスワードはハッシュ化して保存されます
- SQLインジェクション対策としてパラメータ化クエリを使用
- ユーザーは自分のデータのみアクセス可能（user_idでフィルタリング）

## ライセンス

このプロジェクトはPOCのため、ライセンスは特に指定されていません。


